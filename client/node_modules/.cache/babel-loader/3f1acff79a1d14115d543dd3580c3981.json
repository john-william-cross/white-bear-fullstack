{"ast":null,"code":"var _jsxFileName = \"/Users/johncross/Desktop/10xCodeCamp/white-bear-fullstack/client/src/component/ui/LogIn.js\";\nimport React from \"react\";\nimport classnames from \"classnames\";\nimport { v4 as getUuid } from \"uuid\";\nimport { withRouter } from \"react-router-dom\";\nimport hash from \"object-hash\";\nimport { EMAIL_REGEX } from \"../../utils/helpers\";\nimport axios from \"axios\";\nimport actions from \"../../store/actions\";\nimport { connect } from \"react-redux\";\n\nclass LogIn extends React.Component {\n  //we can set the state in constructor\n  constructor(props) {\n    super(props); // console.log(\"In a new class component!\");\n\n    this.state = {\n      isDisplayingInputs: false,\n      emailError: \"\",\n      passwordError: \"\",\n      hasEmailError: false,\n      hasPasswordError: false\n    };\n  }\n\n  async setEmailState(emailInput) {\n    const lowerCasedEmailInput = emailInput.toLowerCase();\n    console.log(lowerCasedEmailInput);\n    if (emailInput === \"\") this.setState({\n      emailError: \"Please enter your email address.\",\n      hasEmailError: true\n    });else if (EMAIL_REGEX.test(lowerCasedEmailInput) === false) {\n      console.log(\"not a valid email\");\n      this.setState({\n        emailError: \"Please enter a valid email address.\",\n        hasEmailError: true\n      });\n    } else {\n      this.setState({\n        emailError: \"\",\n        hasEmailError: false\n      });\n    }\n  }\n\n  async setPasswordState(passwordInput) {\n    console.log(passwordInput);\n\n    if (passwordInput === \"\") {\n      this.setState({\n        passwordError: \"Please enter your password.\",\n        hasPasswordError: true\n      });\n    } else {\n      this.setState({\n        passwordError: \"\",\n        hasPasswordError: false\n      });\n    }\n  }\n\n  async validateAndLogInUser() {\n    const emailInput = document.getElementById(\"signup-email-input\").value;\n    const passwordInput = document.getElementById(\"signup-password-input\").value;\n    console.log({\n      emailInput,\n      passwordInput\n    });\n    await this.setEmailState(emailInput);\n    await this.setPasswordState(passwordInput, emailInput);\n\n    if (this.state.hasEmailError === false && passwordInput.length > 0) {\n      const user = {\n        //creating that user here\n        id: getUuid(),\n        email: emailInput,\n        createdAt: Date.now(),\n        password: hash(passwordInput)\n      };\n      console.log(\"Created user object for POST: \", user); // Mimic API response:\n\n      axios.get(\"https://raw.githubusercontent.com/john-william-cross/white-bear-mpa/910aac8722e9f00ab98100e2eb50d90943f533f3/src/mock-data/user.json\").then(res => {\n        // handle success\n        const currentUser = res.data;\n        console.log(currentUser);\n        this.props.dispatch({\n          type: actions.UPDATE_CURRENT_USER,\n          payload: res.data\n        });\n      }).catch(error => {\n        // handle error\n        console.log(error);\n      }); //redirect the user\n\n      this.props.history.push(\"/create-answer\");\n    }\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-12 col-md-6\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 10\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"card ml-md-8\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"card-body text-dark font-sans-serif\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 16\n      }\n    }, /*#__PURE__*/React.createElement(\"h2\", {\n      className: \"font-serif\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 19\n      }\n    }, \"Welcome Back\"), /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 19\n      }\n    }, \"Log in with your email address and password.\"), /*#__PURE__*/React.createElement(\"p\", {\n      className: \"lead text-muted mt-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 19\n      }\n    }, \"Email address\"), /*#__PURE__*/React.createElement(\"input\", {\n      id: \"signup-email-input\",\n      className: classnames({\n        \"form-control\": true,\n        \"mb-2\": true,\n        lead: true,\n        \"is-invalid\": this.state.emailError\n      }),\n      type: \"email\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 19\n      }\n    }), this.state.hasEmailError && /*#__PURE__*/React.createElement(\"p\", {\n      className: \"text-danger\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 22\n      }\n    }, this.state.emailError), /*#__PURE__*/React.createElement(\"p\", {\n      className: \"lead text-muted mt-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 19\n      }\n    }, \"Password\"), /*#__PURE__*/React.createElement(\"input\", {\n      id: \"signup-password-input\",\n      className: classnames({\n        \"form-control\": true,\n        \"text-muted\": true,\n        \"mt-2\": true,\n        lead: true,\n        \"is-invalid\": this.state.hasPasswordError\n      }),\n      type: \"password\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 19\n      }\n    }), this.state.hasPasswordError && /*#__PURE__*/React.createElement(\"p\", {\n      className: \"text-danger\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 131,\n        columnNumber: 22\n      }\n    }, this.state.passwordError), /*#__PURE__*/React.createElement(\"button\", {\n      to: \"create-answer\",\n      className: \"float-right btn btn-success btn-sm mt-2\",\n      id: \"login-button\",\n      onClick: () => {\n        this.validateAndLogInUser();\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 133,\n        columnNumber: 19\n      }\n    }, \"Log in\"))));\n  }\n\n}\n\nfunction mapStateToProps(state) {\n  //Everything down here is global state\n  //return whatever we want to pass from the global state into the properties\n  return {}; //we don't need any redux global state, but if we do we can grab it from redux global state and map it to this props for this component. Until then we'll return a blank object.\n}\n\nexport default withRouter(connect(mapStateToProps)(LogIn));","map":{"version":3,"sources":["/Users/johncross/Desktop/10xCodeCamp/white-bear-fullstack/client/src/component/ui/LogIn.js"],"names":["React","classnames","v4","getUuid","withRouter","hash","EMAIL_REGEX","axios","actions","connect","LogIn","Component","constructor","props","state","isDisplayingInputs","emailError","passwordError","hasEmailError","hasPasswordError","setEmailState","emailInput","lowerCasedEmailInput","toLowerCase","console","log","setState","test","setPasswordState","passwordInput","validateAndLogInUser","document","getElementById","value","length","user","id","email","createdAt","Date","now","password","get","then","res","currentUser","data","dispatch","type","UPDATE_CURRENT_USER","payload","catch","error","history","push","render","lead","mapStateToProps"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport classnames from \"classnames\";\nimport { v4 as getUuid } from \"uuid\";\nimport { withRouter } from \"react-router-dom\";\nimport hash from \"object-hash\";\nimport { EMAIL_REGEX } from \"../../utils/helpers\";\nimport axios from \"axios\";\nimport actions from \"../../store/actions\";\nimport { connect } from \"react-redux\";\n\nclass LogIn extends React.Component {\n   //we can set the state in constructor\n   constructor(props) {\n      super(props);\n      // console.log(\"In a new class component!\");\n      this.state = {\n         isDisplayingInputs: false,\n         emailError: \"\",\n         passwordError: \"\",\n         hasEmailError: false,\n         hasPasswordError: false,\n      };\n   }\n\n   async setEmailState(emailInput) {\n      const lowerCasedEmailInput = emailInput.toLowerCase();\n      console.log(lowerCasedEmailInput);\n\n      if (emailInput === \"\")\n         this.setState({\n            emailError: \"Please enter your email address.\",\n            hasEmailError: true,\n         });\n      else if (EMAIL_REGEX.test(lowerCasedEmailInput) === false) {\n         console.log(\"not a valid email\");\n         this.setState({\n            emailError: \"Please enter a valid email address.\",\n            hasEmailError: true,\n         });\n      } else {\n         this.setState({ emailError: \"\", hasEmailError: false });\n      }\n   }\n   async setPasswordState(passwordInput) {\n      console.log(passwordInput);\n\n      if (passwordInput === \"\") {\n         this.setState({\n            passwordError: \"Please enter your password.\",\n            hasPasswordError: true,\n         });\n      } else {\n         this.setState({ passwordError: \"\", hasPasswordError: false });\n      }\n   }\n\n   async validateAndLogInUser() {\n      const emailInput = document.getElementById(\"signup-email-input\").value;\n      const passwordInput = document.getElementById(\"signup-password-input\")\n         .value;\n      console.log({ emailInput, passwordInput });\n      await this.setEmailState(emailInput);\n      await this.setPasswordState(passwordInput, emailInput);\n      if (this.state.hasEmailError === false && passwordInput.length > 0) {\n         const user = {\n            //creating that user here\n            id: getUuid(),\n            email: emailInput,\n            createdAt: Date.now(),\n            password: hash(passwordInput),\n         };\n         console.log(\"Created user object for POST: \", user);\n         // Mimic API response:\n         axios\n            .get(\n               \"https://raw.githubusercontent.com/john-william-cross/white-bear-mpa/910aac8722e9f00ab98100e2eb50d90943f533f3/src/mock-data/user.json\"\n            )\n            .then((res) => {\n               // handle success\n               const currentUser = res.data;\n               console.log(currentUser);\n               this.props.dispatch({\n                  type: actions.UPDATE_CURRENT_USER,\n                  payload: res.data,\n               });\n            })\n            .catch((error) => {\n               // handle error\n               console.log(error);\n            });\n         //redirect the user\n         this.props.history.push(\"/create-answer\");\n      }\n   }\n\n   render() {\n      return (\n         <div className=\"col-12 col-md-6\">\n            <div className=\"card ml-md-8\">\n               <div className=\"card-body text-dark font-sans-serif\">\n                  <h2 className=\"font-serif\">Welcome Back</h2>\n                  <p>Log in with your email address and password.</p>\n                  <p className=\"lead text-muted mt-2\">Email address</p>\n                  <input\n                     id=\"signup-email-input\"\n                     className={classnames({\n                        \"form-control\": true,\n                        \"mb-2\": true,\n                        lead: true,\n                        \"is-invalid\": this.state.emailError,\n                     })}\n                     type=\"email\"\n                  />\n                  {this.state.hasEmailError && (\n                     <p className=\"text-danger\">{this.state.emailError}</p>\n                  )}\n                  <p className=\"lead text-muted mt-2\">Password</p>\n\n                  <input\n                     id=\"signup-password-input\"\n                     className={classnames({\n                        \"form-control\": true,\n                        \"text-muted\": true,\n                        \"mt-2\": true,\n                        lead: true,\n                        \"is-invalid\": this.state.hasPasswordError,\n                     })}\n                     type=\"password\"\n                  />\n                  {this.state.hasPasswordError && (\n                     <p className=\"text-danger\">{this.state.passwordError}</p>\n                  )}\n                  <button\n                     to=\"create-answer\"\n                     className=\"float-right btn btn-success btn-sm mt-2\"\n                     id=\"login-button\"\n                     onClick={() => {\n                        this.validateAndLogInUser();\n                     }}\n                  >\n                     Log in\n                  </button>\n               </div>\n            </div>\n         </div>\n      );\n   }\n}\n\nfunction mapStateToProps(state) {\n   //Everything down here is global state\n   //return whatever we want to pass from the global state into the properties\n   return {}; //we don't need any redux global state, but if we do we can grab it from redux global state and map it to this props for this component. Until then we'll return a blank object.\n}\n\nexport default withRouter(connect(mapStateToProps)(LogIn));\n"]},"metadata":{},"sourceType":"module"}